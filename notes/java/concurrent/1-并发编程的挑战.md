# 一、并发编程的挑战

​																								--- 《Java 并发编程的艺术》

## 1. 上下文切换

CPU 通过时间片分配算法来执行任务。

任务从保存到再加载的过程就是一次**上下文切换**。

### 减少上下文切换

+ 无锁并发编程
+ CAS 算法
+ 使用最少线程
+ 协程：单线程实现多任务的调度，并且在单线程里维持多个任务间的切换

## 2. 死锁

线程互相等待对方释放锁。

### 避免死锁的方法

+ 避免一个线程同时获取多个锁
+ 避免一个线程在锁内同时占用多个资源，尽量保证每个锁只占用一个资源
+ 尝试使用定时锁，使用 `lock.tryLock(timeout)`来替代使用内部锁机制
+ 对于数据库锁，加锁和解锁必须在一个数据库连接里，否则会出现解锁失败的情况

## 3. 资源限制的挑战

### 资源限制

并发编程时，程序的执行速度受限于计算机**硬件资源**或**软件资源**

### 解决

+ 硬件资源：使用集群并行执行程序
+ 软件资源：使用资源池进行资源复用

根据不同的资源限制调整程序的并发度